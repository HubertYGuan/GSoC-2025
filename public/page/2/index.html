<!doctype html><html lang=en dir=auto><head><meta name=generator content="Hugo 0.147.6"><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Porting Printing to Zephyr - GSoC 2025</title><meta name=keywords content="Blog,GSoC,Zephyr,OpenPrinting"><meta name=description content="GSoC 2025 Project in Collaboration with OpenPrinting and Zephyr"><meta name=author content="Hubert Guan"><link rel=canonical href=https://HubertYGuan.github.io/GSoC-2025/><meta name=google-site-verification content="XYZabc"><meta name=yandex-verification content="XYZabc"><meta name=msvalidate.01 content="XYZabc"><link crossorigin=anonymous href=/GSoC-2025/assets/css/stylesheet.8fe10233a706bc87f2e08b3cf97b8bd4c0a80f10675a143675d59212121037c0.css integrity="sha256-j+ECM6cGvIfy4Is8+XuL1MCoDxBnWhQ2ddWSEhIQN8A=" rel="preload stylesheet" as=style><link rel=icon href=https://HubertYGuan.github.io/GSoC-2025/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://HubertYGuan.github.io/GSoC-2025/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://HubertYGuan.github.io/GSoC-2025/favicon-32x32.png><link rel=apple-touch-icon href=https://HubertYGuan.github.io/GSoC-2025/apple-touch-icon.png><link rel=mask-icon href=https://HubertYGuan.github.io/GSoC-2025/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate type=application/rss+xml href=https://HubertYGuan.github.io/GSoC-2025/index.xml><link rel=alternate hreflang=en href=https://HubertYGuan.github.io/GSoC-2025/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><script async src="https://www.googletagmanager.com/gtag/js?id=GA4-123-45"></script><script>var dnt,doNotTrack=!1;if(!1&&(dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes"),!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","GA4-123-45")}</script><meta property="og:url" content="https://HubertYGuan.github.io/GSoC-2025/"><meta property="og:site_name" content="Porting Printing to Zephyr - GSoC 2025"><meta property="og:title" content="Porting Printing to Zephyr - GSoC 2025"><meta property="og:description" content="GSoC 2025 Project in Collaboration with OpenPrinting and Zephyr"><meta property="og:locale" content="en-us"><meta property="og:type" content="website"><meta property="og:image" content="https://HubertYGuan.github.io/GSoC-2025/images/openprintingzephyr.png"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://HubertYGuan.github.io/GSoC-2025/images/openprintingzephyr.png"><meta name=twitter:title content="Porting Printing to Zephyr - GSoC 2025"><meta name=twitter:description content="GSoC 2025 Project in Collaboration with OpenPrinting and Zephyr"><script type=application/ld+json>{"@context":"https://schema.org","@type":"Organization","name":"Porting Printing to Zephyr - GSoC 2025","url":"https://HubertYGuan.github.io/GSoC-2025/","description":"GSoC 2025 Project in Collaboration with OpenPrinting and Zephyr","logo":"https://HubertYGuan.github.io/GSoC-2025/favicon.ico","sameAs":["https://linkedin.com/in/hubertyguan","https://github.com/HubertYGuan"]}</script></head><body class=list id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://HubertYGuan.github.io/GSoC-2025/ accesskey=h title="Home (Alt + H)"><img src=https://HubertYGuan.github.io/apple-touch-icon.png alt aria-label=logo height=35>Home</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)" aria-label="Toggle theme">
<svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg>
<svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://github.com/HubertYGuan title="About Me"><span>About Me</span>&nbsp;
<svg fill="none" shape-rendering="geometricPrecision" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" viewBox="0 0 24 24" height="12" width="12"><path d="M18 13v6a2 2 0 01-2 2H5a2 2 0 01-2-2V8a2 2 0 012-2h6"/><path d="M15 3h6v6"/><path d="M10 14 21 3"/></svg></a></li><li><a href=https://github.com/HubertYGuan/zlib title="GitHub Repos"><span>GitHub Repos</span>&nbsp;
<svg fill="none" shape-rendering="geometricPrecision" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" viewBox="0 0 24 24" height="12" width="12"><path d="M18 13v6a2 2 0 01-2 2H5a2 2 0 01-2-2V8a2 2 0 012-2h6"/><path d="M15 3h6v6"/><path d="M10 14 21 3"/></svg></a></li></ul></nav></header><main class=main><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>Week 7: Midterm Update</h2></header><div class=entry-content><p>Now that midterm evaluations have come out, it is time to reflect on my experiences and the progress that I’ve made. Overall, I am proud of the progress that I have made, but I know that there is a lot more work left to do. For this week, I have been able to get a test suite running for libcups. However, there is a lot more testing to be done since libcups is a lot more complex and less self-contained than other libraries like zlib or pdfio.
...</p></div><footer class=entry-footer><span title='2025-08-04 14:08:05 -0700 PDT'>August 4, 2025</span>&nbsp;·&nbsp;4 min&nbsp;·&nbsp;646 words&nbsp;·&nbsp;Hubert Guan</footer><a class=entry-link aria-label="post link to Week 7: Midterm Update" href=https://HubertYGuan.github.io/GSoC-2025/posts/week7/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>Week 6: More Progress on libcups</h2></header><div class=entry-content><p>Although libcups has been the most challenging project to port and has taken a lot longer than I initially thought, I feel like I am finally a lot closer to getting the library operational. Even though I am not quite done with getting everything prepared for compilation unlike what I said I would do earlier, I have gone through and added code for all of the parts where Mbed TLS is needed.
...</p></div><footer class=entry-footer><span title='2025-07-28 21:10:09 -0700 PDT'>July 28, 2025</span>&nbsp;·&nbsp;3 min&nbsp;·&nbsp;436 words&nbsp;·&nbsp;Hubert Guan</footer><a class=entry-link aria-label="post link to Week 6: More Progress on libcups" href=https://HubertYGuan.github.io/GSoC-2025/posts/week6/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>Week 5: libcups Continued</h2></header><div class=entry-content><p>This week was again spent mostly on refactoring libcups to support Mbed TLS, and besides some slight issues, I should be able to finish implementing it soon and then make some additional header files (or forks) to implement the rest of the functionality needed from libc and mDNS Responder so that I can get a test application to compile. Another thing to note is that I feel like I have learned a lot about TLS and cryptography just from working with Mbed TLS. I used to not pay too much attention to the field of cryptography in my work and research, but now I realize more and more that cryptography is definitely relevant to this field of embedded systems and my research in computer architecture.
...</p></div><footer class=entry-footer><span title='2025-07-21 16:56:01 -0700 PDT'>July 21, 2025</span>&nbsp;·&nbsp;2 min&nbsp;·&nbsp;382 words&nbsp;·&nbsp;Hubert Guan</footer><a class=entry-link aria-label="post link to Week 5: libcups Continued" href=https://HubertYGuan.github.io/GSoC-2025/posts/week5/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>Week 4: libcups and Dependencies</h2></header><div class=entry-content><p>I want to start by saying that porting libcups is significantly more complex than porting zlib or PDFio, and I was definitely wrong in saying that I could port it quickly. Although setting up the build scripts and environment is relatively simple, like with zlib and PDFio, I also have to make significant additions and changes to the source code in multiple libraries.
Mbed TLS The first challenge comes in the form of Zephyr’s TLS library, Mbed TLS. Since the design methodologies of OpenSSL, GNU TLS, and Mbed TLS differ, I first had to modify Mbed TLS to expose previously static functions (mainly for cupsAreCredentialsValidForName). Since the contributors didn’t want users to have access to functions like x509_crt_verify_name that are practically needed to implement some of the libcups functions (maybe due to security concerns), this sort of modification is unofficial and can be quite murky.
...</p></div><footer class=entry-footer><span title='2025-07-14 11:52:45 -0700 PDT'>July 14, 2025</span>&nbsp;·&nbsp;3 min&nbsp;·&nbsp;432 words&nbsp;·&nbsp;Hubert Guan</footer><a class=entry-link aria-label="post link to Week 4: libcups and Dependencies" href=https://HubertYGuan.github.io/GSoC-2025/posts/week4/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>Week 3: PDFio and zlib Updates</h2></header><div class=entry-content><p>This week marks the point where zlib and PDFio are wrapped up for now. This update is fairly short since there has not been a lot of new stuff going on this week, since most of the work has been with testing, and I celebrated Independence Day last Friday.
I can now proudly say that zlib passes the provided example and infcover tests at least on the ESP32. Luckily, I did not have to go digging around in GDB very much since the problems seemed to just be in the compile options and library choice. Now that I have enforced the _POSIX_C_SOURCE parameter and switched to newlib, things have been going fine so far.
...</p></div><footer class=entry-footer><span title='2025-07-06 20:17:23 -0700 PDT'>July 6, 2025</span>&nbsp;·&nbsp;2 min&nbsp;·&nbsp;293 words&nbsp;·&nbsp;Hubert Guan</footer><a class=entry-link aria-label="post link to Week 3: PDFio and zlib Updates" href=https://HubertYGuan.github.io/GSoC-2025/posts/week3/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>Week 2: PDFio and zlib Continued</h2></header><div class=entry-content><p>This week was mainly a continuation of my work during week 1. I continued work on zlib by conducting more rigorous testing, covering the relevant tests within the default CMakeLists. Overall, I think that zlib is mostly functional at the current state and should provide general compression and decompression functionality.
Notes on zlib There are still some things to keep in mind on the current state of zlib; first of which is building the test application, especially since I have to use a file system like littlefs. In gzlib.c and related source files for “gz” prefixed functions, file i/o functionality is required, and I figured that littlefs would be a good fit since it is designed for use in embedded applications. However, it seems that some platforms, such as my native_sim and qemu_riscv64/32, struggle with building the application with littlefs or with interacting with the filesystem. I have found that real hardware (i.e., the ESP32) works the best for building and running the application. However, the application still fails two coverage tests (cover_wrap and cover_back) in the provided CMake tests. Therefore, I will have to look into OpenOCD so I can get a debugger running. On the other hand, I’m able to pass all the tests not involving file i/o on native_sim, likely since there are differences between the C libraries on native_sim and other platforms (e.g., I think I am able to include header files on my system but not in the Zephyr libc). Another factor to keep in mind is that I also decreased the parameters for max LZ77 window bits and default memory level to avoid a heap overflow on my ESP32. Lastly, I have a few remarks on the Kconfig option CONFIG_POSIX_API. Although this page states that the option should not be used for new Zephyr applications, the truth is that unistd.h still uses a #ifdef CONFIG_POSIX_API block around some important functions like read(), write(), etc. Therefore, I have set the option as a dependency for zlib.
...</p></div><footer class=entry-footer><span title='2025-06-29 21:40:07 -0700 PDT'>June 29, 2025</span>&nbsp;·&nbsp;3 min&nbsp;·&nbsp;473 words&nbsp;·&nbsp;Hubert Guan</footer><a class=entry-link aria-label="post link to Week 2: PDFio and zlib Continued" href=https://HubertYGuan.github.io/GSoC-2025/posts/week2/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>Week 1: PDFio and zlib</h2></header><div class=entry-content><p>Now that this inaugural week is done, I have some time to reflect on what I’ve learned and what did/did not go well. I’ve learned that I definitely work best at the beginning of my day, as I can basically devote my time entirely to the project for a few hours before dealing with other things and working more intermittently throughout pretty much the rest of the day. However, there are some things that can distract me from keeping up the momentum for those first few hours. Therefore, I think that starting work earlier and adapting my environment to be free of those distractions is something I should look towards.
...</p></div><footer class=entry-footer><span title='2025-06-21 18:05:27 -0700 PDT'>June 21, 2025</span>&nbsp;·&nbsp;4 min&nbsp;·&nbsp;699 words&nbsp;·&nbsp;Hubert Guan</footer><a class=entry-link aria-label="post link to Week 1: PDFio and zlib" href=https://HubertYGuan.github.io/GSoC-2025/posts/week1/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>Porting Printing to Zephyr</h2></header><div class=entry-content><p>About the Project Printers are a technology that we often think should “just work,” but in reality, there are often many hoops to jump through when dealing with a printer’s drivers. It is a common experience when dealing with printers to struggle to get a document printed when trying every which way on an OS like modern Windows, but then all the problems suddenly disappear when using an Apple device. This is in large part thanks to Apple’s AirPrint, which is the oldest and most widely supported driverless printing protocol. The driverless nature is important as it prevents the issue of having printer drivers that may not be updated to support the user’s current operating system. However, AirPrint is not an open standard, and only Apple operating systems are designed with it in mind. This leads us to IPP Everywhere, a driverless printing protocol that is an open standard, and its pivotal role in the modern open-source printing stack developed by OpenPrinting. This would theoretically allow any operating system that supports the printing stack to print, as long as the printer supports IPP Everywhere.
...</p></div><footer class=entry-footer><span title='2025-05-27 15:17:36 -0700 PDT'>May 27, 2025</span>&nbsp;·&nbsp;2 min&nbsp;·&nbsp;355 words&nbsp;·&nbsp;Hubert Guan</footer><a class=entry-link aria-label="post link to Porting Printing to Zephyr" href=https://HubertYGuan.github.io/GSoC-2025/posts/intro/></a></article><footer class=page-footer><nav class=pagination><a class=prev href=https://HubertYGuan.github.io/GSoC-2025/>«&nbsp;Prev&nbsp;</a></nav></footer></main><footer class=footer><span>© Hubert Guan, OpenPrinting, Zephyr</span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
<a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentColor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>